à
Š/Users/guilhermelyracampos/Documents/programacao/source/git/backend-challenge-pedidos/BackendChallenge.Pedidos.Domain/Entities/Entidade.cs
	namespace 	
BackendChallenge
 
. 
Pedidos "
." #
Domain# )
.) *
Entities* 2
{ 
public 

abstract 
class 
Entidade "
{ 
public 
Entidade 
( 
) 
{ 	
DataCriacao 
= 
DateTime "
." #
UtcNow# )
;) *
}		 	
public

 
int

 
Id

 
{

 
get

 
;

 
set

  
;

  !
}

" #
public 
DateTime 
DataCriacao #
{$ %
get& )
;) *
	protected+ 4
set5 8
;8 9
}: ;
public 
DateTime 
DataAtualizacao '
{( )
get* -
;- .
	protected/ 8
set9 <
;< =
}> ?
public 
abstract 
bool 
IsValid $
{% &
get' *
;* +
	protected, 5
set6 9
;9 :
}; <
	protected 
abstract 
bool 
Validar  '
(' (
)( )
;) *
	protected 
virtual 
void 
	Atualizar (
(( )
)) *
{ 	
DataAtualizacao 
= 
DateTime &
.& '
UtcNow' -
;- .
} 	
} 
} 
‰/Users/guilhermelyracampos/Documents/programacao/source/git/backend-challenge-pedidos/BackendChallenge.Pedidos.Domain/Entities/IPedido.cs
	namespace 	
BackendChallenge
 
. 
Pedidos "
." #
Domain# )
.) *
Entities* 2
{ 
public 

	interface 
IPedido 
{ 
void 
AdicionarItem 
( 
Item 
item  $
)$ %
;% &
void 
RemoverItem 
( 
Item 
item "
)" #
;# $
} 
}		 ƒ
†/Users/guilhermelyracampos/Documents/programacao/source/git/backend-challenge-pedidos/BackendChallenge.Pedidos.Domain/Entities/Item.cs
	namespace 	
BackendChallenge
 
. 
Pedidos "
." #
Domain# )
.) *
Entities* 2
{ 
public 

class 
Item 
: 
Entidade  
{ 
	protected 
Item 
( 
) 
{ 	
}		 	
public

 
Item

 
(

 
string

 
produto

 "
,

" #
decimal

$ +
preco

, 1
,

1 2
int

3 6

quantidade

7 A
)

A B
{ 	
Produto 
= 
produto 
; 
Preco 
= 
preco 
; 

Quantidade 
= 

quantidade #
;# $
} 	
public 
string 
Produto 
{ 
get  #
;# $
private% ,
set- 0
;0 1
}2 3
public 
decimal 
Preco 
{ 
get "
;" #
private$ +
set, /
;/ 0
}1 2
public 
int 

Quantidade 
{ 
get  #
;# $
private% ,
set- 0
;0 1
}2 3
public 
decimal 
Total 
{ 
get "
{# $
return% +
(, -
Preco- 2
*3 4

Quantidade5 ?
)? @
;@ A
}B C
}D E
public 
Pedido 
Pedido 
{ 
get "
;" #
set$ '
;' (
}) *
public 
override 
bool 
IsValid $
{% &
get' *
{+ ,
return- 3
Validar4 ;
(; <
)< =
;= >
}? @
	protectedA J
setK N
{O P
}Q R
}S T
	protected 
override 
bool 
Validar  '
(' (
)( )
=>* ,
new- 0
ItemValidacoes1 ?
(? @
)@ A
.A B
ValidateB J
(J K
thisK O
)O P
.P Q
IsValidQ X
;X Y
public 
void 
	Atualizar 
( 
string $
produto% ,
,, -
decimal. 5
preco6 ;
,; <
int= @

quantidadeA K
)K L
{ 	
base 
. 
	Atualizar 
( 
) 
; 
Produto 
= 
produto 
; 
Preco 
= 
preco 
; 

Quantidade 
= 

quantidade #
;# $
} 	
}   
}!! §
ˆ/Users/guilhermelyracampos/Documents/programacao/source/git/backend-challenge-pedidos/BackendChallenge.Pedidos.Domain/Entities/Pedido.cs
	namespace 	
BackendChallenge
 
. 
Pedidos "
." #
Domain# )
.) *
Entities* 2
{ 
public 

class 
Pedido 
: 
Entidade "
{ 
public		 
Pedido		 
(		 
)		 
{

 	
Itens 
= 
new 
List 
< 
Item !
>! "
(" #
)# $
;$ %
} 	
public 
Pedido 
( 
ICollection !
<! "
Item" &
>& '
itens( -
)- .
{ 	
Itens 
= 
itens 
; 
} 	
public 
virtual 
ICollection "
<" #
Item# '
>' (
Itens) .
{/ 0
get1 4
;4 5
set6 9
;9 :
}; <
public 
int 
TotalDeItens 
{  !
get" %
{& '
return( .
Itens/ 4
!=5 7
null8 <
?= >
Itens? D
.D E
CountE J
:K L
$numM N
;N O
}P Q
}R S
public 
decimal 

ValorTotal !
{" #
get$ '
{( )
return* 0
Itens1 6
!=7 9
null: >
?? @
ItensA F
.F G
SumG J
(J K
pK L
=>M O
pP Q
.Q R
TotalR W
)W X
:Y Z
$num[ \
;\ ]
}^ _
}` a
public 
void 
AdicionarItem !
(! "
Item" &
item' +
)+ ,
{ 	
if 
( 
item 
. 
IsValid 
) 
Itens 
? 
. 
Add 
( 
item 
)  
;  !
} 	
public 
void 
RemoverItem 
(  
string  &
produto' .
). /
{ 	
Itens 
? 
. 
Remove 
( 
Itens 
.  
FirstOrDefault  .
(. /
i/ 0
=>1 3
i4 5
.5 6
Produto6 =
.= >
ToLowerInvariant> N
(N O
)O P
.P Q
EqualsQ W
(W X
produtoX _
._ `
ToLowerInvariant` p
(p q
)q r
)r s
)s t
)t u
;u v
}   	
public"" 
void"" 
	Atualizar"" 
("" 
Pedido"" $
pedido""% +
)""+ ,
{## 	
base$$ 
.$$ 
	Atualizar$$ 
($$ 
)$$ 
;$$ 
if%% 
(%% 
TotalDeItens%% 
>%% 
$num%%  
)%%  !
{&& 
Itens'' 
='' 
null'' 
;'' 
Itens(( 
=(( 
pedido(( 
.(( 
Itens(( $
;(($ %
})) 
}** 	
public++ 
override++ 
bool++ 
IsValid++ $
{++% &
get++' *
;++* +
	protected++, 5
set++6 9
;++9 :
}++; <
	protected-- 
override-- 
bool-- 
Validar--  '
(--' (
)--( )
{.. 	
return// 
true// 
;// 
}00 	
}11 
}22 ¾
“/Users/guilhermelyracampos/Documents/programacao/source/git/backend-challenge-pedidos/BackendChallenge.Pedidos.Domain/Validations/ItemValidacoes.cs
	namespace 	
BackendChallenge
 
. 
Pedidos "
." #
Domain# )
.) *
Validations* 5
{ 
public 

class 
ItemValidacoes 
:  !
AbstractValidator" 3
<3 4
Item4 8
>8 9
{ 
public 
ItemValidacoes 
( 
) 
{ 	
RuleFor		 
(		 
p		 
=>		 
p		 
.		 
Produto		 "
)		" #
.

 
NotNull

 
(

 
)

 
.

 
NotEmpty

 #
(

# $
)

$ %
. 
WithMessage 
( 
$str <
)< =
;= >
RuleFor 
( 
p 
=> 
p 
. 
Preco  
)  !
. 
NotNull 
( 
) 
. 
GreaterThan &
(& '
$num' (
)( )
. 
WithMessage 
( 
$str B
)B C
;C D
RuleFor 
( 
p 
=> 
p 
. 

Quantidade %
)% &
. 
NotNull 
( 
) 
. 
NotEmpty #
(# $
)$ %
.% &
GreaterThan& 1
(1 2
$num2 3
)3 4
. 
WithMessage 
( 
$str X
)X Y
;Y Z
} 	
} 
} 